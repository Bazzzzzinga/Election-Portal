{% extends "Election_Portal/template.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<script>
	function startTimer(duration, display) {
		    var start = Date.now(),
			diff,
			hours,
			minutes,
			seconds;
		    function timer() {
			diff = duration - (((Date.now() - start) / 1000) | 0);
			minutes = (diff / 60) | 0;
			hours = (minutes/60) | 0;
			minutes=(minutes-(hours*60)) | 0;
			seconds = (diff % 60) | 0;
				
			hours= hours < 10 ? "0" + hours : hours;
			minutes = minutes < 10 ? "0" + minutes : minutes;
			seconds = seconds < 10 ? "0" + seconds : seconds;

			display.textContent = hours + ":" + minutes + ":" + seconds; 

			if (diff <= 0) {
			    start = Date.now() + 1000;
			}
		    };
		    timer();
		    setInterval(timer, 1000);
		}

		window.onload = function () {
		    var alpha = {{ time_left }},
			display = document.querySelector('#time');
		    startTimer(alpha, display);
		};
</script>
<div class="row">
	<div class="col s10"></div>
	<div class="col s2">
		<font size="5", color="Black"><strong><i>Elections close in</i></strong>
		<br>
		<span id="time"></span>
	</div>
</div>


<div class="row">
    <form class="col s12" method="POST" action="{% url 'Election_Portal:vote_done' election.id %}">
    {% csrf_token %}
    	<div class="row">
    		<div class="col s1"></div>
			<div class="col s2">
				<font size="5" color="#008080"><u><i><strong>List Of Candidates</strong></i></u></font>
			</div>
			<div class="col s9"></div>
    	</div>

    	<br>
    	<br>

    	<div class="row">
        	<div class="col s3"></div>
        	<div class="col s2 valign center-block">
        		<font size="5" style="background-color:#F5DEB3;color:#8B4513">Name</font>
        	</div>
        	<div class="col s2">
        		<font size="5" style="background-color:#F5DEB3;color:#8B4513">Department</font>
        	</div>
        	<div class="col s2">
        		<font size="5" style="background-color:#F5DEB3;color:#8B4513">Link</font>
        	</div>
        	<div class="col s1>">
        		<font size="5" style="background-color:#F5DEB3;color:#8B4513">Vote</font>
        	</div>
        	<div class="col s2"></div>
    	</div>

    	<br>
        {% for candidate in candidates %}
    	<div class="row">
        	<div class="col s3"></div>
        	<div class="col s2">
        		<font color="#8B008B">{{ candidate.name }} ({{ candidate.user }})</font><br>
        	</div>
        	<div class="col s2">
        		<font size="5" color="#DB7093">{{ candidate.branch }}</font>
        	</div>
        	<div class="col s2">
        		<a href="#modal" class="modal-trigger">Manifesto Link</a>
                <div id="modal" class="modal modal-fixed-footer z-depth-3">
                    <div class="modal-content">
                        {{ candidate.work_experience }}
                    </div>
                </div> 
        	</div>
        	<div class="col s1">
        		<input color="black" id="{{ candidate.user }}" type="radio" name="candidate" value="{{ candidate.user }}">
                <label for="{{ candidate.user }}"></label>
        	</div>
    	</div>
        <br>
        {% endfor %}
    	<div class="row">
    		<div class="col s9"></div>
    		<div class="col s1">
    			<button type="submit" name="action">Submit</button>
    		</div>
    		<div class="col s2"></div>
    	</div>
    </form>
</div>

{% endblock %}
